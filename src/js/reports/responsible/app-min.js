import{validateRequired}from"../../module/validate-min.js";import{getDocument}from"../../module/services/services-min.js";document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".export-button"),t=document.querySelector("#btnSearch"),a=document.querySelector("#txtResponsible");let o=!1,r=new DataTable("#tblResponsible",{dom:"lBfrtip",async:!0,ajax:{url:"../../app/controllers/ReportController.php?isGet=true&get=responsible",type:"GET",dataSrc:""},loading:!0,pageLength:25,columns:[{title:"C贸digo factura",data:"codigo_factura"},{title:"Numero",data:"numero"},{title:"Fecha de transacci贸n",data:"fecha_transaccion"},{title:"Fecha de vencimiento",data:"fecha_vencimiento"},{title:"Responsable",data:"responsable"},{title:"Total",data:"total"}],select:!1,responsive:!0,paging:!0,searching:!1,language:{url:"https://cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json"}});function n(){const e=document.getElementById("loading-indicator");e.style.display=o?"block":"none"}t.addEventListener("click",(async()=>{let e="../../app/controllers/ReportController.php?isGet=true&get=responsible";validateRequired(a.value)&&(e=`../../app/controllers/ReportController.php?isGet=true&get=responsible&responsible=${a.value}`),r&&r.destroy(),r=new DataTable("#tblResponsible",{dom:"lBfrtip",async:!0,ajax:{url:e,type:"GET",dataSrc:""},loading:!0,pageLength:25,columns:[{title:"C贸digo factura",data:"codigo_factura"},{title:"Numero",data:"numero"},{title:"Fecha de transacci贸n",data:"fecha_transaccion"},{title:"Fecha de vencimiento",data:"fecha_vencimiento"},{title:"Responsable",data:"responsable"},{title:"Total",data:"total"}],select:!1,responsive:!0,paging:!0,searching:!1,language:{url:"https://cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json"}})})),e.forEach((e=>{e.addEventListener("click",(async()=>{o=!0,n();let t=e.getAttribute("data-document-type"),r=a.value??null;switch(t){case"pdf":await getDocument(`../../app/controllers/ReportController.php?option=pdf&category=rpr&responsible=${r}`,"Reporte por responsable de entrega","pdf"),o=!1,n();break;case"excel":await getDocument(`../../app/controllers/ReportController.php?option=xlsx&category=rpr&responsible=${r}`,"Reporte por responsable de entrega","xlsx"),o=!1,n();break;case"csv":await getDocument(`../../app/controllers/ReportController.php?option=csv&category=rpr&responsible=${r}`,"Reporte por responsable de entrega","csv"),o=!1,n();break;case"xml":await getDocument(`../../app/controllers/ReportController.php?option=xml&category=rpr&responsible=${r}`,"Reporte por responsable de entrega","xml"),o=!1,n();break;default:o=!1,n()}}))}))}));